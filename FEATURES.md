# 功能清单

## 🎯 核心功能

### 1. 文件上传功能
- ✅ **拖拽上传**：支持将CSV文件拖拽到上传区域
- ✅ **点击上传**：点击"选择文件"按钮选择文件
- ✅ **文件验证**：自动验证文件格式，只接受.csv文件
- ✅ **上传进度**：显示文件上传进度条
- ✅ **错误提示**：文件格式错误时显示友好提示

### 2. 协议解析功能
- ✅ **CAN协议解析**：
  - 添加"协议类型"列（显示"CAN"）
  - 添加"消息ID"列（基于数据长度的十六进制ID）
  - 添加"数据长度"列（每行字段数量）
  
- ✅ **CANOPEN协议解析**：
  - 添加"协议类型"列（显示"CANOPEN"）
  - 添加"节点ID"列（Node_1, Node_2, ...）
  - 添加"对象索引"列（0x0000, 0x0064, ...）
  - 添加"子索引"列（0x00）

### 3. 数据预览功能
- ✅ **表格展示**：以表格形式显示解析后的数据
- ✅ **协议信息**：显示当前使用的解析协议
- ✅ **数据统计**：显示总行数、列数等统计信息
- ✅ **性能优化**：大数据量时只显示前100行
- ✅ **原始文件名显示**：预览区域显示原始文件名而非UUID
- ✅ **左右分栏预览**：左侧为消息列表，右侧为统一数据表
- ✅ **统一表头**：右侧表格标准化为 `Time / From->To / Id / Data`
- ✅ **动态侧栏标题**：根据协议显示 `Available CAN messages` 或 `Available CANopen messages`
- ✅ **消息聚合**：左侧按消息 Id 聚合并显示出现次数

### 4. 文件管理功能
- ✅ **文件列表**：显示所有已上传的文件
- ✅ **文件信息**：显示文件大小、行数、列数、上传时间
- ✅ **原始文件名**：保持用户友好的文件名显示
- ✅ **删除功能**：支持删除不需要的文件
- ✅ **刷新功能**：手动刷新文件列表

### 5. 用户界面功能
- ✅ **协议选择**：上传区域提供CAN/CANOPEN协议选择按钮
- ✅ **双解析按钮**：每个文件都有CAN解析和CANOPEN解析按钮
- ✅ **响应式设计**：适配不同屏幕尺寸
- ✅ **实时反馈**：操作成功/失败的消息提示
- ✅ **加载状态**：文件上传和解析时的加载提示
- ✅ **分栏布局**：预览采用侧栏+主内容的分栏布局，移动端自动单栏

### 6. 示例数据与字段规范
- ✅ **示例CSV表头**：`Type,Source,Target,Name,Time,Buffer`
- ✅ **字段含义映射**：
  - `Time` → 表格列 Time
  - `Source + '->' + Target` → 表格列 From->To
  - `Name` → 表格列 Id（并作为左侧消息聚合键）
  - `Buffer` → 表格列 Data
- ✅ **示例数据**：包含 CAN 与 CANopen 的多条样例帧，便于联调与展示

## 🔧 技术功能

### 1. 后端功能
- ✅ **RESTful API**：标准的REST API设计
- ✅ **文件存储**：UUID_原始文件名.csv格式存储
- ✅ **协议处理**：根据协议参数进行不同的数据处理
- ✅ **错误处理**：完善的错误处理和响应
- ✅ **CORS支持**：支持跨域请求

### 2. 前端功能
- ✅ **原生JavaScript**：无框架依赖，轻量级
- ✅ **事件处理**：文件选择、拖拽、按钮点击等事件
- ✅ **DOM操作**：动态更新页面内容
- ✅ **AJAX请求**：与后端API通信
- ✅ **数据格式化**：文件大小、日期等数据格式化显示

### 3. 数据处理功能
- ✅ **CSV解析**：使用Go标准库解析CSV文件
- ✅ **数据验证**：验证CSV文件格式和内容
- ✅ **协议转换**：根据协议添加特定字段
- ✅ **数据统计**：计算行数、列数等统计信息
- ✅ **性能优化**：大数据量处理优化

## 📊 API接口

### 1. 文件上传接口
- `POST /api/upload`
  - 功能：上传CSV文件
  - 参数：multipart/form-data
  - 返回：文件信息和上传状态

### 2. 文件管理接口
- `GET /api/files`
  - 功能：获取已上传文件列表
  - 返回：文件列表和详细信息

- `DELETE /api/file/:filename`
  - 功能：删除指定文件
  - 参数：文件名
  - 返回：删除状态

### 3. 数据解析接口
- `GET /api/parse/:filename?protocol=CAN`
  - 功能：使用CAN协议解析文件
  - 参数：文件名、协议类型
  - 返回：解析后的数据

- `GET /api/parse/:filename?protocol=CANOPEN`
  - 功能：使用CANOPEN协议解析文件
  - 参数：文件名、协议类型
  - 返回：解析后的数据

## 🎨 界面特性

### 1. 视觉设计
- ✅ **现代化UI**：渐变背景、圆角设计、阴影效果
- ✅ **图标使用**：协议选择、文件操作等图标
- ✅ **颜色搭配**：统一的色彩方案
- ✅ **字体设计**：清晰的字体层次

### 2. 交互设计
- ✅ **悬停效果**：按钮悬停时的视觉反馈
- ✅ **点击反馈**：按钮点击时的状态变化
- ✅ **拖拽反馈**：文件拖拽时的视觉提示
- ✅ **加载动画**：上传和解析时的进度显示

### 3. 响应式设计
- ✅ **移动端适配**：在小屏幕设备上的优化显示
- ✅ **弹性布局**：自适应不同屏幕尺寸
- ✅ **触摸友好**：移动设备上的触摸操作优化

## 🚀 性能特性

### 1. 前端性能
- ✅ **轻量级**：无外部框架依赖
- ✅ **快速加载**：静态资源优化
- ✅ **内存优化**：大数据量时的分页显示
- ✅ **缓存机制**：浏览器缓存优化

### 2. 后端性能
- ✅ **并发处理**：支持多用户同时使用
- ✅ **内存管理**：高效的内存使用
- ✅ **文件处理**：流式处理大文件
- ✅ **错误恢复**：异常情况的自动恢复

## 🔒 安全特性

### 1. 文件安全
- ✅ **格式验证**：只接受CSV文件
- ✅ **大小限制**：防止过大文件上传
- ✅ **路径安全**：防止路径遍历攻击
- ✅ **文件名安全**：UUID命名避免冲突

### 2. 数据安全
- ✅ **输入验证**：所有输入参数验证
- ✅ **错误处理**：不暴露敏感信息
- ✅ **CORS配置**：安全的跨域设置
- ✅ **文件隔离**：上传文件独立存储

## 📈 扩展性

### 1. 协议扩展
- 🔄 **新协议支持**：可轻松添加新的解析协议
- 🔄 **配置化**：协议规则可配置化
- 🔄 **插件化**：支持协议插件机制

### 2. 功能扩展
- 🔄 **数据导出**：支持解析结果导出
- 🔄 **批量处理**：支持批量文件处理
- 🔄 **数据可视化**：图表展示功能
- 🔄 **用户管理**：多用户支持

## ✅ 测试覆盖

### 1. 功能测试
- ✅ **文件上传测试**：各种文件格式和大小
- ✅ **协议解析测试**：CAN和CANOPEN协议
- ✅ **界面交互测试**：所有按钮和操作
- ✅ **错误处理测试**：各种异常情况

### 2. 兼容性测试
- ✅ **浏览器兼容**：Chrome、Firefox、Edge、Safari
- ✅ **操作系统兼容**：Windows、macOS、Linux
- ✅ **设备兼容**：桌面、平板、手机
- ✅ **Go版本兼容**：Go 1.21+

## 📝 文档支持

### 1. 用户文档
- ✅ **README.md**：项目介绍和使用说明
- ✅ **功能清单**：详细的功能列表
- ✅ **API文档**：接口使用说明
- ✅ **故障排除**：常见问题解决方案

### 2. 开发文档
- ✅ **代码注释**：详细的代码注释
- ✅ **架构说明**：系统架构和设计
- ✅ **部署指南**：部署和运行说明
- ✅ **开发指南**：开发和扩展指南
